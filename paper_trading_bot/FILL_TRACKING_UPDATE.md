# –û–Ω–æ–≤–ª–µ–Ω–Ω—è: –¢—Ä–µ–∫—ñ–Ω–≥ Fills —Ç–∞ Exits

## –©–æ –î–æ–¥–∞–Ω–æ

‚úÖ **–ü–æ–≤–Ω–∏–π —Ç—Ä–µ–∫—ñ–Ω–≥ –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É —Ç—Ä–µ–π–¥—ñ–≤:**
- PENDING ‚Üí FILLED ‚Üí CLOSED/CANCELLED

## –ù–æ–≤—ñ –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### 1. Entry Fill Tracking

–ë–æ—Ç –≤—ñ–¥—Å—Ç–µ–∂—É—î —á–∏ —Ü—ñ–Ω–∞ –¥–æ—Å—è–≥–ª–∞ –≤–∞—à–æ–≥–æ limit order:

```
üìà ENTRY SIGNAL DETECTED!
   Entry Price: $96,500.50
   Status: PENDING (waiting for fill)

‚úÖ ORDER FILLED!
   Fill Price: $96,500.50
   Fill Time: 2025-11-14 10:30:00
   Status: FILLED
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
- LONG: –û—Ä–¥–µ—Ä –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∫–æ–ª–∏ —Ü—ñ–Ω–∞ –ø–∞–¥–∞—î –¥–æ entry_price
- SHORT: –û—Ä–¥–µ—Ä –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∫–æ–ª–∏ —Ü—ñ–Ω–∞ –ø—ñ–¥–Ω—ñ–º–∞—î—Ç—å—Å—è –¥–æ entry_price

### 2. Stop Loss & Take Profit Tracking

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö exits:

```
üéØ TP1 HIT!
   Price: $97,301.00

üéØ TP2 HIT!
   Price: $97,701.50

üéâ ALL TPS HIT!
   Entry: $96,500.50
   Exit: $98,502.50
   PnL: +$265.15 (+2.07%)
   Status: CLOSED
```

–∞–±–æ

```
üõë STOP LOSS HIT!
   Entry: $96,500.50
   Exit: $96,100.00
   PnL: -$53.00 (-0.41%)
   Status: CLOSED
```

### 3. PnL Calculation

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø—Ä–∏–±—É—Ç–∫—É/–∑–±–∏—Ç–∫—É:
- –í USD ($)
- –£ –≤—ñ–¥—Å–æ—Ç–∫–∞—Ö (%)
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å—É

### 4. Order Cancellation

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –æ—Ä–¥–µ—Ä—ñ–≤:
- Pending orders —Å—Ç–∞—Ä—ñ—à—ñ 24 –≥–æ–¥–∏–Ω —Å–∫–∞—Å–æ–≤—É—é—Ç—å—Å—è
- Status –∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ CANCELLED

```
‚ö†Ô∏è  ORDER CANCELLED (timeout)
   Direction: LONG
   Entry Price: $96,500.50
   Reason: No fill after 24 hours
```

## –ù–æ–≤–∏–π JSON –§–æ—Ä–º–∞—Ç

### –†–∞–Ω—ñ—à–µ (—Ç—ñ–ª—å–∫–∏ —Å–∏–≥–Ω–∞–ª):

```json
{
  "direction": "LONG",
  "entry_price": 96500.50,
  "stop_loss": 96100.00,
  "tp1": 97301.00,
  "status": "SIGNAL_GENERATED"
}
```

### –¢–µ–ø–µ—Ä (–ø–æ–≤–Ω–∏–π lifecycle):

```json
{
  "direction": "LONG",
  "entry_price": 96500.50,
  "stop_loss": 96100.00,
  "tp1": 97301.00,
  "tp2": 97701.50,
  "tp3": 98502.50,
  "status": "CLOSED",
  "fill_price": 96500.50,
  "fill_time": "2025-11-14 10:30:00",
  "exit_price": 98502.50,
  "exit_time": "2025-11-14 12:45:00",
  "exit_reason": "ALL_TPS",
  "tp1_hit": true,
  "tp2_hit": true,
  "tp3_hit": true,
  "pnl": 265.15,
  "pnl_pct": 2.07
}
```

## –ù–æ–≤—ñ –ü–æ–ª—è

| –ü–æ–ª–µ | –û–ø–∏—Å |
|------|------|
| `status` | PENDING / FILLED / CLOSED / CANCELLED |
| `fill_price` | –¶—ñ–Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è entry –æ—Ä–¥–µ—Ä–∞ |
| `fill_time` | –ß–∞—Å fill |
| `exit_price` | –¶—ñ–Ω–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è –ø–æ–∑–∏—Ü—ñ—ó |
| `exit_time` | –ß–∞—Å exit |
| `exit_reason` | STOP_LOSS / ALL_TPS / CANCELLED |
| `tp1_hit` | –ß–∏ –¥–æ—Å—è–≥–Ω—É—Ç–æ TP1 |
| `tp2_hit` | –ß–∏ –¥–æ—Å—è–≥–Ω—É—Ç–æ TP2 |
| `tp3_hit` | –ß–∏ –¥–æ—Å—è–≥–Ω—É—Ç–æ TP3 |
| `pnl` | –ü—Ä–∏–±—É—Ç–æ–∫/–∑–±–∏—Ç–æ–∫ –≤ USD |
| `pnl_pct` | –ü—Ä–∏–±—É—Ç–æ–∫/–∑–±–∏—Ç–æ–∫ —É % |

## –ö–æ–Ω—Å–æ–ª—å–Ω–∏–π –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

–†–æ–∑—à–∏—Ä–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å —É –∫–æ–∂–Ω—ñ–π —ñ—Ç–µ—Ä–∞—Ü—ñ—ó:

```
[2025-11-14 10:30:15] Checking for signals...
   Current Price: $96,500.50
   Active Sweeps: 1
   Pending Orders: 2      ‚Üê –ß–µ–∫–∞—é—Ç—å fill
   Active Trades: 1       ‚Üê –í—ñ–¥–∫—Ä–∏—Ç—ñ –ø–æ–∑–∏—Ü—ñ—ó
   Closed Trades: 15      ‚Üê –ó–∞–≤–µ—Ä—à–µ–Ω—ñ
   Balance: $10,450.00    ‚Üê –ü–æ—Ç–æ—á–Ω–∏–π –±–∞–ª–∞–Ω—Å
```

## Session Summary

–ü—Ä–∏ –∑—É–ø–∏–Ω—Ü—ñ –±–æ—Ç–∞ (Ctrl+C):

```
üìä SESSION SUMMARY
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üíº Trade Statistics:
   Total Signals: 20
   Pending Orders: 2
   Active Trades: 1
   Closed Trades: 17

üí∞ Performance:
   Initial Balance: $10,000.00
   Final Balance: $10,450.00
   Total PnL: +$450.00
   Return: +4.50%

üìà Win/Loss:
   Winning Trades: 12
   Losing Trades: 5
   Win Rate: 70.6%

üìã Latest Closed Trades:
   1. LONG | Entry: $96,500.50 | Exit: $98,502.50 | PnL: +$265.15 (ALL_TPS)
   2. SHORT | Entry: $95,200.00 | Exit: $95,600.00 | PnL: -$53.00 (STOP_LOSS)
   ...
```

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –î–µ—Ç–∞–ª—ñ

### –ö–ª–∞—Å PaperTrade

–ù–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è —Ç—Ä–µ–∫—ñ–Ω–≥—É –∫–æ–∂–Ω–æ–≥–æ —Ç—Ä–µ–π–¥–∞:

```python
class PaperTrade:
    def check_fill(self, candle) -> bool:
        """–ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –¥–æ—Å—è–≥–Ω—É—Ç–∞ entry price"""

    def check_exit(self, candle) -> Optional[str]:
        """–ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –¥–æ—Å—è–≥–Ω—É—Ç—ñ SL –∞–±–æ TP"""
```

### –ú–µ—Ç–æ–¥ track_trades()

–í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –∫–æ–∂–Ω—É 15M —Å–≤—ñ—á–∫—É:

```python
def track_trades(self, df_15m):
    # 1. –ü–µ—Ä–µ–≤—ñ—Ä—è—î pending orders –Ω–∞ fill
    # 2. –ü–µ—Ä–µ–≤—ñ—Ä—è—î active trades –Ω–∞ exit
    # 3. –°–∫–∞—Å–æ–≤—É—î —Å—Ç–∞—Ä—ñ orders (>24h)
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–ù—ñ—á–æ–≥–æ –Ω–µ –∑–º—ñ–Ω–∏–ª–æ—Å—å —É –∑–∞–ø—É—Å–∫—É:

```bash
cd paper_trading_bot
./deploy.sh
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏–º–µ fills —Ç–∞ exits!

## –ê–Ω–∞–ª—ñ–∑ –†–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

–í—Å—ñ —Ç—Ä–µ–π–¥–∏ –∑ –ø–æ–≤–Ω–æ—é —ñ—Å—Ç–æ—Ä—ñ—î—é –≤ `paper_trading_logs/signals_*.json`:

```bash
# –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è —Ç—ñ–ª—å–∫–∏ closed trades
cat signals_*.json | grep '"status": "CLOSED"'

# –ü–æ—Ä–∞—Ö—É–≤–∞—Ç–∏ win rate
cat signals_*.json | jq 'select(.status == "CLOSED") | .pnl' | awk '{if($1>0) w++; else l++} END {print w/(w+l)*100"%"}'
```

## –ü–µ—Ä–µ–≤–∞–≥–∏

‚úÖ **–†–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–π paper trading** - fills –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ —Ä–µ–∞–ª—å–Ω–∏—Ö —Ü—ñ–Ω
‚úÖ **–ü–æ–≤–Ω–∞ –ø—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å** - –±–∞—á–∏—Ç–µ –∫–æ–∂–µ–Ω fill —Ç–∞ exit
‚úÖ **–¢–æ—á–Ω–∏–π PnL** - —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–µ–∞–ª—å–Ω–∏—Ö fills
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ—á–∏—Å—Ç–∫–∞** - —Å—Ç–∞—Ä—ñ orders —Å–∫–∞—Å–æ–≤—É—é—Ç—å—Å—è
‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏** - –ø–æ–≤–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –∫–æ–∂–Ω–æ–≥–æ —Ç—Ä–µ–π–¥–∞

## –ù–∞—Å—Ç—É–ø–Ω—ñ –ö—Ä–æ–∫–∏

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞: `./deploy.sh`
2. –°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π—Ç–µ –∑–∞ fills —Ç–∞ exits –≤ real-time
3. –ê–Ω–∞–ª—ñ–∑—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤ JSON –ª–æ–≥–∞—Ö
4. –û—Ü—ñ–Ω—ñ—Ç—å —Ä–µ–∞–ª—å–Ω—É –ø—Ä–∏–±—É—Ç–∫–æ–≤—ñ—Å—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó
5. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ

---

**–ì–æ—Ç–æ–≤–æ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è!** üöÄ
